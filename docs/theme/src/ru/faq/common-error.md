---
title: Распространенные ошибки
icon: warn
category:
  - FAQ
---

## `TypeError: Invalid value used as weak map key`

Если вы столкнулись с такой ошибкой, вероятно, вы используете нестандартные теги в своем проекте.

Существуют такие теги, как `<center>` или `<font>`, которые есть в спецификации HTML1.0, но помечены как нерекомендуемые с тех пор, как HTML4.0 был выпущен в 1999 году, а затем удален в выпуске HTML5 в 2008 году. Так что Vue не позволяет вам использовать их по умолчанию. Вероятно, вам следует удалить их и использовать стандартный тег HTML5.

Чтобы удалить их, запустите тему с флагом `--debug`, и вы получите журналы предупреждений, сообщающие вам о тегах, которые, вероятно, не распознаются.

Чтобы использовать их в любом случае, проверьте [здесь](https://v2.vuepress.vuejs.org/guide/markdown.html#non-standard-html-tags), чтобы найти обходной путь.

## `Hydration completed but contains mismatches.`

Эта ошибка указывает на несоответствие SSR, и это не должно быть проблемой с темой.

Сначала проверьте, используете ли вы сервисы, связанные с CloudFlare, и если да, обязательно отключите статическое сжатие ресурсов. Посетите [dash.cloudflare.com](https://dash.cloudflare.com), перейдите в раздел Веб-сайты → `YOUR_DOMAIN` → Скорость → Оптимизация, отключите `JavaScript` и `HTML` в параметрах `Auto Minify`.

::: warning

Auto Minify в CloudFlare неправильно обрабатывает пробелы HTML и разрывы строк, что может привести к тому, что Vue вызовет несоответствие SSR во время инициализации.

:::

Также вы можете проверить это:

- Если вы столкнулись с этой проблемой только на определенных страницах, проверьте, есть ли на странице дополнительные компоненты, которые вы добавили.

  Если это так, эти компоненты, вероятно, будут иметь разные результаты рендеринга между SSR и клиентом. Вы можете попытаться сделать их поведение согласованным или обернуть свои компоненты компонентом `<ClientOnly />`, предоставляемым `@vuepress/client`.

- Если у вас есть эта проблема на всех страницах, выполните предыдущий шаг, чтобы проверить компоненты, которые вы добавили в макет, или глобальные компоненты.

## `xxx isn’t assign with a lang, and will return 'en-US' instead.`

Если вы видите, что `xxx isn’t assign with a lang, and will return 'en-US' instead.` во время запуска процесса разработки проверьте, установили ли вы язык для каждого языка.

Даже если у вас только один язык, вам все равно нужно [установить язык](../config/i18n.md#setting-language).

## `useXXX() is called without provider`

Такие ошибки обычно возникают из-за неправильного включения в проект нескольких версий `@vue/xxx`, `@vuepress/xxx`, `vue` или `vue-router`.

Убедитесь, что вы используете последние версии `vuepress` и `vuepress-theme-hope`:

::: code-tabs#shell

@tab pnpm

```bash
pnpm add vuepress@next vuepress-theme-hope@next
```

@tab yarn

```bash
yarn add vuepress@next vuepress-theme-hope@next
```

@tab npm

```bash
npm i vuepress@next vuepress-theme-hope@next
```

:::

Кроме того, обновите зависимости, чтобы ваш проект содержал только одну версию соответствующего пакета:

::: code-tabs#shell

@tab pnpm

```bash
pnpm i && pnpm up
```

@tab yarn

```bash
yarn && yarn upgrade
```

@tab npm

```bash
npm i && npm update
```

:::

## Некоторые настройки страницы недействительны

Вы можете сначала просмотреть документацию, чтобы узнать, **не поддерживает ли параметр конфигурацию страницы**.

**Поддержка конфигурации страницы** означает, что тема позволяет конфигурации страницы переопределять глобальную конфигурацию с тем же именем (та же функция), но не все функции соответствуют этому параметру.

::: tip

Вы должны знать, что некоторые функции не будут загружены на этапе подготовки, когда глобальная настройка отключена, поэтому их нельзя включить локально.

:::
