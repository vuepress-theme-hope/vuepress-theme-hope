import type { App } from "vue";
import { inject } from "vue";

import type { RevealOptions as OriginalRevealOptions } from "../typings/index.js";

declare const __VUEPRESS_DEV__: boolean;

export type RevealOptions = Omit<OriginalRevealOptions, "embedded">;

let revealOptions: Partial<RevealOptions> = {};

const revealSymbol = Symbol(__VUEPRESS_DEV__ ? "reveal" : "");

export const defineRevealConfig = (options: Partial<RevealOptions>): void => {
  revealOptions = options;
};

export const useRevealConfig = (): Partial<RevealOptions> =>
  inject(revealSymbol)!;

export const injectRevealConfig = (app: App): void => {
  app.provide(revealSymbol, revealOptions);
};
